(this["webpackJsonpreact-redux-saga-project"]=this["webpackJsonpreact-redux-saga-project"]||[]).push([[0],{40:function(e,t,n){},41:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(17),r=n.n(c),i=(n(40),n(41),n(16));const d="SIGN_IN",s="INCREMENT",l="DECREMENT";var u=n(15);const p=e=>e.user,h=(Object(u.a)(p,(e=>e.data)),Object(u.a)(p,(e=>e.loaded)),e=>e.weather),A=Object(u.a)(h,(e=>e.data)),b=Object(u.a)(h,(e=>e.loaded)),g={LOAD_USER:"LOAD_USER",LOAD_USER_SUCCESS:"LOAD_USER_SUCCESS",LOAD_USER_FAIL:"LOAD_USER_FAIL"},j={loadUserAction:e=>({type:g.LOAD_USER,payload:e}),loadUserSuccessAction:e=>({type:g.LOAD_USER_SUCCESS,payload:e}),loadUserFailAction:()=>({type:g.LOAD_USER_FAIL})},O={LOAD_WEATHER_API:"LOAD_WEATHER_API",LOAD_WEATHER_API_SUCCESS:"LOAD_WEATHER_API_SUCCESS",LOAD_WEATHER_API_FAIL:"LOAD_WEATHER_API_FAIL"},_={loadWeatherApiAction:e=>({type:O.LOAD_WEATHER_API,payload:e}),loadWeatherApiSuccessAction:e=>({type:O.LOAD_WEATHER_API_SUCCESS,payload:e}),loadWeatherApiFailAction:()=>({type:O.LOAD_WEATHER_API_FAIL})};var f,S=n(8),E=n(9);var v,m=E.a.button(f||(f=Object(S.a)(["\n  width : 25%;\n  min-width: 200px;\n  font: inherit;\n  padding: 0.5rem 1.5rem;\n  border: 1px solid #7d0d0d;  \n  border-radius: 6px;\n  color: white;\n  background: #7d0d0d;\n  box-shadow: 0 0 4px rgba(0, 0, 0, 0.26);\n  cursor: pointer;\n  margin-top: 20px;\n  \n\n &:focus {\n   outline: none;\n }\n\n &:hover,\n &:active {\n   background: #b92525;\n   border-color: #b92525;\n   box-shadow: 0 0 8px rgba(0, 0, 0, 0.26);\n }\n "])));var x,y=E.a.div(v||(v=Object(S.a)(["\npadding-top: 17rem;\ndisplay: flex;\njustify-content: center;\nalign-items: center;\nflex-flow: column nowrap;\n\n& div {\n  display: ","\n}\n\n& input {\n  width: 30%;\n  min-width: 200px;\n  border: 2px solid ",";\n  background: ",";\n  font: inherit;\n  line-height: 1.5rem;\n  padding: 0 0.25rem;\n  border-radius: 4px;\n  color: white;\n}\n\n\n\n& input:focus {\n  outline: none;\n  background: #e2913c;\n  border-color: #a76a69;\n}\n"])),(e=>e.visible?"none":""),(e=>e.invalid?"red":"#ccc"),(e=>e.invalid?"#d4a7a7":"#ff9500"));var L,w=E.a.p(x||(x=Object(S.a)(["\nfont-size:16px;\n& span {\n    font-weight: bold;\n    color: #25223e;\n}\n"])));var D,I=E.a.div(L||(L=Object(S.a)(['\n\n  width: 100%;\n  height: 100vh;\n  background: url("https://images.unsplash.com/photo-1567304441104-d7a7d3e4bc1b?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2849&q=80");\n  background-repeat: no-repeat;\n  background-size: cover;\n'])));var R=E.a.div(D||(D=Object(S.a)(["\n  width: 30%;\n  height: 50%;\n  border-radius: 12px;\n  box-shadow: 0 1px 8px rgba(0, 0, 0, 0.25);\n  margin-top: 20px;\n  background: #e6d9c3;\n  opacity: 0.7;\n"]))),k=n(4);var F=()=>{const e=Object(i.b)(),[t,n]=Object(a.useState)(""),[o,c]=Object(a.useState)(!0),[r,d]=Object(a.useState)(!1),s=Object(i.c)(A),l=Object(i.c)(b);return Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(I,{children:Object(k.jsxs)(y,{invalid:!o,children:[Object(k.jsx)("input",{type:"text",value:t,placeholder:"Please type a city name",onChange:e=>{n(e.target.value),t.trim().length>0&&(c(!0),d(!r))}}),Object(k.jsx)(m,{onClick:a=>{e(_.loadWeatherApiAction(t)),0!==t.trim().length?n(""):c(!1)},children:"Show me the weather forecast"}),l?Object(k.jsxs)(R,{children:[Object(k.jsxs)(w,{children:[Object(k.jsx)("span",{children:"City:"})," ",s.city.name]}),Object(k.jsxs)(w,{children:[Object(k.jsx)("span",{children:"Temp: "}),Math.trunc(s.list[0].main.temp)," \xb0C"]}),Object(k.jsxs)(w,{children:[Object(k.jsx)("span",{children:"Description: "}),s.list[0].weather[0].description]})]}):Object(k.jsx)(k.Fragment,{})]})})})};var T=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(F,{})})},U=n(11),C=n(35),W=n(34);var P=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case s:return e+1;case l:return e-1;default:return e}};var H=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(arguments.length>1?arguments[1]:void 0).type===d?!e:e};const M={data:{id:null,name:"Joe",age:"30"},loading:!1,loaded:!1,loadFail:!1};var B=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g.LOAD_USER:return{...e,loading:!0,loaded:!1,loadFail:!1};case g.LOAD_USER_SUCCESS:return{...e,loading:!1,loaded:!0,loadFail:!1,data:t.payload};case g.LOAD_USER_FAIL:return{...e,loading:!1,loaded:!1,loadFail:!0};default:return{...e}}};const N={data:{},loading:!1,loaded:!1,loadFail:!1};var z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.LOAD_WEATHER_API:return{...e,loading:!0,loaded:!1,loadFail:!1};case O.LOAD_WEATHER_API_SUCCESS:return{...e,loading:!1,loaded:!0,loadFail:!1,data:t.payload};case O.LOAD_WEATHER_API_FAIL:return{...e,loading:!1,loaded:!1,loadFail:!0};default:return{...e}}};var J=Object(U.combineReducers)({counter:P,isLogged:H,user:B,weather:z}),q=n(7);function*G(e){try{const e={data:{id:1,name:"John",age:"35"},success:!0};e.success?yield Object(q.c)(j.loadUserSuccessAction(e.data)):yield Object(q.c)(j.loadUserFailAction())}catch(t){yield Object(q.c)(j.loadUserFailAction())}}function*V(){yield Object(q.d)(g.LOAD_USER,G)}var Y=n(12),K=n.n(Y);const Q=function(){var e;return{getService:function(){return e||(e=this)},setToken:function(e){localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token)},getAccessToken:function(){return localStorage.getItem("access_token")},getRefreshToken:function(){return localStorage.getItem("refresh_token")},clearToken:function(){localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token")}}}();const X=Q.getService();K.a.interceptors.request.use((e=>{const t=X.getAccessToken();return t&&(e.headers.Authorization="Bearer "+t),e.headers["Content-Type"]="application/json",e}),(e=>{Promise.reject(e)})),K.a.interceptors.response.use((e=>e),(async function(e){const t=e.config;if(401===e.response.status&&"http://192.168.1.27:3001/v1/auth/token"===t.url)return Promise.reject(e);if(401===e.response.status&&!t._retry){t._retry=!0;const e=await K.a.post("/auth/token",{refresh_token:X.getRefreshToken()});if(201===e.status)return X.setToken(e.data),K.a.defaults.headers.common.Authorization="Bearer "+X.getAccessToken(),K()(t)}return Promise.reject(e)}));var Z=async e=>await K.a.get("".concat("https://api.openweathermap.org/data/2.5/forecast?q=").concat(e,"&units=metric&appid=").concat("209681e4c06f24f06f8d7496ce90e792"));function*$(e){try{const t=yield Object(q.b)(Z,e.payload);t?yield Object(q.c)(_.loadWeatherApiSuccessAction(t.data)):yield Object(q.c)(_.loadWeatherApiFailAction())}catch(t){yield Object(q.c)(_.loadWeatherApiFailAction())}}function*ee(){yield Object(q.d)(O.LOAD_WEATHER_API,$)}const te=Object(C.a)(),ne=[te],ae=Object(U.createStore)(J,Object(W.composeWithDevTools)(Object(U.applyMiddleware)(...ne)));te.run((function*(){yield Object(q.a)([V(),ee()])}));var oe=ae;var ce=e=>{e&&e instanceof Function&&n.e(3).then(n.bind(null,66)).then((t=>{let{getCLS:n,getFID:a,getFCP:o,getLCP:c,getTTFB:r}=t;n(e),a(e),o(e),c(e),r(e)}))};r.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(i.a,{store:oe,children:Object(k.jsx)(T,{})})}),document.getElementById("root")),ce()}},[[65,1,2]]]);
//# sourceMappingURL=main.b42fb3e5.chunk.js.map